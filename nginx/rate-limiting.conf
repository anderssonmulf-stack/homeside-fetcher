# Rate limiting zones for svenskeb.se
# Include this in the http block of nginx.conf

# Login/auth endpoints - strict: 1 request per second, burst of 3
limit_req_zone $binary_remote_addr zone=login:10m rate=1r/s;

# General API/page requests - moderate: 10 requests per second, burst of 20
limit_req_zone $binary_remote_addr zone=general:10m rate=10r/s;

# Connection limiting - max concurrent connections per IP
limit_conn_zone $binary_remote_addr zone=addr:10m;

# Return 429 Too Many Requests instead of 503
limit_req_status 429;
limit_conn_status 429;
